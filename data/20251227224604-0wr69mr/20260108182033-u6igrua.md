# 代理文件

加多个机场链接，所有国外出口全用webshare

```undefined
mixed-port: 7890
mode: rule
log-level: info

tun:
  enable: true
  stack: system
  auto-route: true
  auto-detect-interface: true
  strict-route: true
  dns-hijack:
    - any:53
    - tcp://any:53

dns:
  enable: true
  enhanced-mode: fake-ip
  listen: 0.0.0.0:1053
  ipv6: false
  nameserver:
    - 223.5.5.5
    - 119.29.29.29


proxy-providers:
  airport1:
    type: http
    url: "https://msub.xn--m7r52rosihxm.com/api/v1/client/subscribe?token=defb75f714cae148142610b0d01e539a"
    interval: 3600
    path: ./proxy_providers/airport1.yaml
    health-check:
      enable: true
      url: "https://cp.cloudflare.com/generate_204"
      interval: 300

  airport2:
    type: http
    url: "https://sub.xeton.dev/sub?target=clash&url=vmess%3A%2F%2FewogICJ2IjogIjIiLAogICJwcyI6ICJjdXN0b21lciIsCiAgImFkZCI6ICI0My4xMzUuMTc5LjE3OSIsCiAgInBvcnQiOiAxMDAwMSwKICAiaWQiOiAiZGFhYmIwZGEtYjJlMC00ZmU2LWY4NjUtZmMxMzZlZGY3MDY5IiwKICAiYWlkIjogMCwKICAibmV0IjogInRjcCIsCiAgInR5cGUiOiAibm9uZSIsCiAgImhvc3QiOiAiIiwKICAicGF0aCI6ICIiLAogICJ0bHMiOiAibm9uZSIKfQ%3D%3D&insert=false&config=https%3A%2F%2Fraw.githubusercontent.com%2FACL4SSR%2FACL4SSR%2Fmaster%2FClash%2Fconfig%2FACL4SSR_Online.ini"
    interval: 3600
    path: ./proxy_providers/airport2.yaml
    health-check:
      enable: true
      url: "https://cp.cloudflare.com/generate_204"
      interval: 300
 

  # 需要更多机场订阅就按同样格式继续加：
  # airport3:
  #   type: http
  #   url: "机场订阅链接3"
  #   interval: 3600
  #   path: ./proxy_providers/airport3.yaml
  #   health-check:
  #     enable: true
  #     url: "https://cp.cloudflare.com/generate_204"
  #     interval: 300

proxies:
  - name: 家宽出口
    type: socks5          # 如果你的家宽是 http 代理：改成 http
    server: 163.123.203.81
    port: 8184
    username: "ykyglufs"
    password: "8xu7zvkp7k9w"
    udp: true
    # 关键：家宽出口建连时，通过“入口机场”拨号（形成：机场 -> 家宽）
    dialer-proxy: 入口机场

proxy-groups:
  # 自动：从所有机场的所有节点中选“最佳”
  - name: 最佳节点
    type: url-test
    use:
      - airport1
      - airport2
      # - airport3
    url: "https://cp.cloudflare.com/generate_204"
    interval: 900
    tolerance: 200
    lazy: true

  # 手动：可以从所有机场节点里手动选第一跳；也可以选“最佳节点”
  - name: 入口机场
    type: select
    proxies:
      - 最佳节点
    use:
      - airport1
      - airport2
      # - airport3

rules:
  - DST-PORT,53,DIRECT
  - IP-CIDR,8.8.8.8/32,DIRECT,no-resolve
  - IP-CIDR,8.8.4.4/32,DIRECT,no-resolve

  # 防回环：访问家宽代理服务器本身(163.123.203.81:8184)时，强制走入口机场
  - IP-CIDR,163.123.203.81/32,入口机场,no-resolve

  # 局域网/本机直连
  - IP-CIDR,127.0.0.0/8,DIRECT
  - IP-CIDR,10.0.0.0/8,DIRECT
  - IP-CIDR,172.16.0.0/12,DIRECT
  - IP-CIDR,192.168.0.0/16,DIRECT

  # 国内直连（如你的客户端缺少 geosite 数据导致报错，就删掉 GEOSITE 这一行）
  - GEOSITE,CN,DIRECT
  - GEOIP,CN,DIRECT

  # 其余全部：国外走「入口机场(手动/最佳) -> 家宽出口」
  - MATCH,家宽出口


```

‍
